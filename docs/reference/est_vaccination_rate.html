<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Estimate OCV Vaccination Rates — est_vaccination_rate • MOSAIC</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Estimate OCV Vaccination Rates — est_vaccination_rate"><meta name="description" content="This function processes vaccination data from WHO or GTFCC, redistributes doses based on a maximum daily rate, and calculates vaccination parameters for use in the MOSAIC cholera model. The processed data includes redistributed daily doses, cumulative doses, and the proportion of the population vaccinated. The results are saved as CSV files for downstream modeling."><meta property="og:description" content="This function processes vaccination data from WHO or GTFCC, redistributes doses based on a maximum daily rate, and calculates vaccination parameters for use in the MOSAIC cholera model. The processed data includes redistributed daily doses, cumulative doses, and the proportion of the population vaccinated. The results are saved as CSV files for downstream modeling."><meta property="og:image" content="https://institutefordiseasemodeling.github.io/MOSAIC-pkg/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">MOSAIC</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Deployment.html">Deployment</a></li>
    <li><a class="dropdown-item" href="../articles/Installation.html">Installation</a></li>
    <li><a class="dropdown-item" href="../articles/Running-MOSAIC.html">Running MOSAIC</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/InstituteforDiseaseModeling/MOSAIC-pkg/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Estimate OCV Vaccination Rates</h1>
      <small class="dont-index">Source: <a href="https://github.com/InstituteforDiseaseModeling/MOSAIC-pkg/blob/HEAD/R/est_vaccination_rate.R" class="external-link"><code>R/est_vaccination_rate.R</code></a></small>
      <div class="d-none name"><code>est_vaccination_rate.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function processes vaccination data from WHO or GTFCC, redistributes doses based on a maximum daily rate, and calculates vaccination parameters for use in the MOSAIC cholera model. The processed data includes redistributed daily doses, cumulative doses, and the proportion of the population vaccinated. The results are saved as CSV files for downstream modeling.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">est_vaccination_rate</span><span class="op">(</span></span>
<span>  <span class="va">PATHS</span>,</span>
<span>  date_start <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  date_stop <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">max_rate_per_day</span>,</span>
<span>  <span class="va">data_source</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-paths">PATHS<a class="anchor" aria-label="anchor" href="#arg-paths"></a></dt>
<dd><p>A list containing file paths, including:</p><dl><dt>DATA_SCRAPE_WHO_VACCINATION</dt>
<dd><p>The path to the folder containing WHO vaccination data.</p></dd>

<dt>DATA_DEMOGRAPHICS</dt>
<dd><p>The path to the folder containing demographic data.</p></dd>

<dt>MODEL_INPUT</dt>
<dd><p>The path to the folder where processed data will be saved.</p></dd>


</dl></dd>


<dt id="arg-date-start">date_start<a class="anchor" aria-label="anchor" href="#arg-date-start"></a></dt>
<dd><p>The start date for the vaccination data range (in "YYYY-MM-DD" format). Defaults to the earliest date in the data.</p></dd>


<dt id="arg-date-stop">date_stop<a class="anchor" aria-label="anchor" href="#arg-date-stop"></a></dt>
<dd><p>The stop date for the vaccination data range (in "YYYY-MM-DD" format). Defaults to the latest date in the data.</p></dd>


<dt id="arg-max-rate-per-day">max_rate_per_day<a class="anchor" aria-label="anchor" href="#arg-max-rate-per-day"></a></dt>
<dd><p>The maximum vaccination rate per day used to redistribute doses. Default is 100,000 doses/day.</p></dd>


<dt id="arg-data-source">data_source<a class="anchor" aria-label="anchor" href="#arg-data-source"></a></dt>
<dd><p>The source of the vaccination data. Must be one of <code>"WHO"</code>, <code>"GTFCC"</code>, or <code>"BOTH"</code>. When <code>"BOTH"</code> is specified, the function uses combined data from both sources with GTFCC prioritized and unique WHO campaigns added.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>This function does not return an R object but saves the following files to the directory specified in <code>PATHS$MODEL_INPUT</code>:</p><ul><li><p>A redistributed vaccination data file named <code>"data_vaccinations_&lt;suffix&gt;_redistributed.csv"</code> where suffix is WHO, GTFCC, or GTFCC_WHO.</p></li>
<li><p>A parameter data frame for the vaccination rate (nu) named <code>"param_nu_vaccination_rate_&lt;suffix&gt;.csv"</code>.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function performs the following steps:</p><ol><li><p><strong>Load Vaccination Data</strong>:
- Reads processed vaccination data from WHO or GTFCC and filters for relevant columns (<code>iso_code</code>, <code>campaign_date</code>, <code>doses_shipped</code>).</p></li>
<li><p><strong>Redistribute Doses</strong>:
- Redistributes shipped doses day by day based on a maximum daily rate (<code>max_rate_per_day</code>).
- Ensures no duplication of <code>distribution_date</code> within <code>iso_code</code>.</p></li>
<li><p><strong>Validate Redistribution</strong>:
- Checks that the redistributed doses sum to the total shipped doses.</p></li>
<li><p><strong>Ensure Full Coverage</strong>:
- Ensures all ISO codes have data across the full date range (<code>date_start</code> to <code>date_stop</code>), filling missing dates with zero doses.</p></li>
<li><p><strong>Calculate Population Metrics</strong>:
- Merges population data for 2023, calculates cumulative doses, and computes the proportion of the population vaccinated.</p></li>
<li><p><strong>Save Outputs</strong>:
- Saves the redistributed vaccination data and the vaccination rate parameter data frame.</p></li>
</ol></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">PATHS</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  DATA_SCRAPE_WHO_VACCINATION <span class="op">=</span> <span class="st">"path/to/who_vaccination_data"</span>,</span></span>
<span class="r-in"><span>  DATA_DEMOGRAPHICS <span class="op">=</span> <span class="st">"path/to/demographics"</span>,</span></span>
<span class="r-in"><span>  MODEL_INPUT <span class="op">=</span> <span class="st">"path/to/save/processed/data"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">est_vaccination_rate</span><span class="op">(</span><span class="va">PATHS</span>, max_rate_per_day <span class="op">=</span> <span class="fl">100000</span>, data_source <span class="op">=</span> <span class="st">"WHO"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/gilesjohnr" class="external-link">John R Giles</a>, <a href="https://github.com/ChristopherWLorton" class="external-link">Christopher W Lorton</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

