name: mosaic-conda-env
channels:
  - pytorch                # Official PyTorch channel for GPU support
  - conda-forge
  - defaults
dependencies:
  - python=3.11            # Python 3.12 too new for Ubuntu 20.04 compatible packages
  - pip
  # Pin to older versions compatible with Ubuntu 20.04 (GLIBCXX_3.4.28)
  # These versions were released when Ubuntu 20.04 was current
  - numpy=1.24.3           # Last 1.x series, pre-dates numpy 2.0 ABI break
  - pyarrow=14.0.1         # 2024 Q1 release, compatible with older systems
  # LASER dependencies
  - numba=0.58.1           # Compatible with numpy 1.24
  - llvmlite=0.41.1        # Required by numba 0.58
  # TensorFlow/Keras for suitability estimation
  - tensorflow=2.15.0      # Last 2.15.x, widely compatible
  - h5py=3.10.0            # Compatible with tensorflow 2.15
  - packaging=24.0         # Python dependency management
  # Neural Posterior Estimation (NPE) dependencies
  - pytorch::pytorch=2.1.2 # 2023 release, Ubuntu 20.04 compatible
  - scikit-learn=1.3.2     # 2023 release
  - pip:
      - sbi>=0.23          # Simulation-based inference toolkit
      - lampe              # Alternative NPE toolkit with better GPU support
      - zuko               # Normalizing flows library (required by lampe)
      - keras>=3.6         # Keras 3 compatible with TensorFlow 2.15+
      - laser-core==0.4.0
      - https://github.com/InstituteforDiseaseModeling/laser-cholera/releases/download/v0.9.1/laser_cholera-0.9.1-py3-none-any.whl
