% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calc_deaths_from_infections.R
\name{calc_deaths_from_infections}
\alias{calc_deaths_from_infections}
\title{Calculate deaths from symptomatic infections with threshold-dependent IFR}
\usage{
calc_deaths_from_infections(
  infections,
  N,
  mu_baseline,
  mu_slope = 0,
  mu_epidemic_factor,
  epidemic_threshold,
  delta_t = 0
)
}
\arguments{
\item{infections}{Numeric vector of new symptomatic infections over time for one location}

\item{N}{Scalar or vector of population size (can be time-varying)}

\item{mu_baseline}{Scalar baseline IFR for this location (between 0 and 1)}

\item{mu_slope}{Scalar temporal slope factor (default 0 for no trend)}

\item{mu_epidemic_factor}{Scalar proportional increase during epidemic (e.g., 0.5 = 50\% increase)}

\item{epidemic_threshold}{Scalar location-specific threshold (infections/N) for epidemic definition}

\item{delta_t}{Non-negative integer number of days for the infection-to-death delay (default 0)}
}
\value{
Numeric vector of deaths at each time step
}
\description{
Maps symptomatic infections to deaths using an infection fatality ratio (IFR)
that increases during epidemic periods when incidence exceeds a threshold.
The IFR can also include a temporal trend component. Deaths can be delayed
relative to infections to account for the time between symptom onset and death.
}
\details{
The time-varying IFR is calculated as:
\deqn{\mu_t = \mu_{baseline} \times (1 + \mu_{slope} \times t) \times (1 + \mu_{epidemic} \times \mathbb{1}_{epidemic})}

where \eqn{\mathbb{1}_{epidemic}} is 1 when incidence rate exceeds the threshold, 0 otherwise.

When \code{delta_t > 0}, deaths at time \code{t} result from infections at time \code{t - delta_t}.
The first \code{delta_t} elements of the output will be \code{NA} since no infection data
is available before the start of the time series.
}
\examples{
# Simulate an outbreak
infections <- c(10, 20, 50, 100, 80, 40, 20, 10)
deaths <- calc_deaths_from_infections(
  infections = infections,
  N = 100000,
  mu_baseline = 0.01,
  mu_slope = 0,
  mu_epidemic_factor = 0.5,
  epidemic_threshold = 30/100000,
  delta_t = 0
)

# With temporal trend
deaths_trend <- calc_deaths_from_infections(
  infections = infections,
  N = 100000,
  mu_baseline = 0.01,
  mu_slope = 0.1,  # 10\% increase over time period
  mu_epidemic_factor = 0.5,
  epidemic_threshold = 30/100000,
  delta_t = 0
)

# With 3-day infection-to-death delay
deaths_delayed <- calc_deaths_from_infections(
  infections = infections,
  N = 100000,
  mu_baseline = 0.01,
  mu_slope = 0,
  mu_epidemic_factor = 0.5,
  epidemic_threshold = 30/100000,
  delta_t = 3
)

}
