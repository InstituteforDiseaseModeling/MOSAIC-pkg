% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/est_initial_E_I.R
\name{est_initial_E_I}
\alias{est_initial_E_I}
\title{Estimate Initial E and I Compartments from Surveillance Data}
\usage{
est_initial_E_I(
  PATHS,
  priors,
  config,
  n_samples = 1000,
  t0 = NULL,
  lookback_days = 21,
  verbose = TRUE,
  parallel = FALSE,
  variance_inflation = 2
)
}
\arguments{
\item{PATHS}{List of paths from \code{get_paths()}.}

\item{priors}{Prior distributions for parameters (e.g., \code{priors_default}).}

\item{config}{Configuration object with location codes and \code{date_start}.
Must include \code{config$location_name} and \code{config$date_start}.}

\item{n_samples}{Number of Monte Carlo samples (default 1000).}

\item{t0}{Target date for estimation (default from \code{config$date_start}).}

\item{lookback_days}{Days of surveillance data to use (default 21).}

\item{verbose}{Print progress messages (default TRUE).}

\item{parallel}{Enable parallel processing for Monte Carlo sampling when
\code{n_samples >= 100} (default FALSE). Uses \code{parallel::mclapply()} with all
available cores. Note: Not supported on Windows.}

\item{variance_inflation}{Factor to create variance in Beta distributions (default 2).
Sets ci_lower = mean_val / variance_inflation and ci_upper = mean_val * variance_inflation.
Values > 1 create wider distributions around the sample mean. Should be > 1.1 for meaningful variance.}
}
\value{
A list with two main components:
\describe{
\item{metadata}{List containing estimation details: description, version, date, t0,
lookback_days, n_samples, and method.}
\item{parameters_location}{List with \code{prop_E_initial} and \code{prop_I_initial}, each containing:
\itemize{
\item parameter_name: Parameter identifier
\item distribution: \code{"beta"}
\item parameters$location: Named list by ISO code with \code{shape1}, \code{shape2}, \code{mean},
\code{variance}, \code{method} (fitting method used), and \code{metadata} (data availability,
sample statistics)
}
}
}
}
\description{
This function estimates the initial number of individuals in the Exposed (E) and
Infected (I) compartments at model start time using recent surveillance data
through a Monte Carlo simulation approach.
}
\details{
The method back-calculates true infections from reported cases using the surveillance
cascade, accounts for reporting delays, and estimates E/I compartments based on
epidemiological progression rates. Includes comprehensive parameter validation,
numerical stability protections, and optional parallel processing.
}
\examples{
\dontrun{
PATHS  <- get_paths()
priors <- priors_default
config <- config_default
results <- est_initial_E_I(
  PATHS, priors, config,
  n_samples = 1000,
  variance_inflation = 2           # Factor for expanding CI bounds around sample mean
)
}

}
