% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/est_suitability.R
\name{est_suitability}
\alias{est_suitability}
\title{Estimate Environmental Suitability (psi) for Cholera Transmission}
\usage{
est_suitability(
  PATHS,
  fit_date_start = NULL,
  fit_date_stop = NULL,
  pred_date_start = NULL,
  pred_date_stop = NULL
)
}
\arguments{
\item{PATHS}{A list containing paths where the data is stored. Typically generated by the \code{get_paths()} function and should include:
\itemize{
\item \strong{DATA_CHOLERA_WEEKLY}: Path to the directory containing processed combined weekly cholera cases data (WHO+JHU+SUPP sources).
\item \strong{DATA_ELEVATION}: Path to the directory where elevation data is stored.
\item \strong{MODEL_INPUT}: Path to save the processed model inputs and outputs.
\item \strong{DOCS_FIGURES}: Path to save the generated plots.
}}

\item{fit_date_start}{Date string or NULL. Start date for model fitting period. If NULL, auto-detects from first cholera case data.}

\item{fit_date_stop}{Date string or NULL. End date for model fitting period. If NULL, auto-detects from last date with both cholera cases and complete ENSO data.}

\item{pred_date_start}{Date string or NULL. Start date for prediction period. If NULL, uses fit_date_start.}

\item{pred_date_stop}{Date string or NULL. End date for prediction period. If NULL, auto-detects from last date with complete ENSO data.}
}
\value{
This function processes climate and cholera case data, fits an LSTM model, makes predictions on
environmental suitability (psi), and saves both the predictions and covariate data. It also
generates a plot showing the model fit (accuracy and loss over training epochs) and saves it to a
specified directory.
}
\description{
This function loads climate data, ENSO data, and weekly cholera cases data to estimate the environmental
suitability for cholera transmission based on various environmental factors. It scales the climate
covariates and then fits an LSTM-based RNN model to predict cholera outbreaks. The model is trained
using past cholera case data and climate conditions, and predictions are made for environmental
suitability (psi) based on the climate covariates.
}
\details{
The function performs the following steps:
\itemize{
\item Loads processed climate and cholera data.
\item Determines appropriate date ranges for fitting and prediction based on data availability.
\item Validates data completeness within specified date ranges.
\item Scales the climate covariates using training data statistics.
\item Splits the training data into training and validation sets.
\item Builds an LSTM-based recurrent neural network (RNN) model for predicting cholera outbreaks.
\item Trains the model on the training set and evaluates performance on the validation set.
\item Makes predictions on the full prediction period dataset.
\item Applies temporal smoothing to predictions and saves results to specified directories.
}
}
\note{
The LSTM model uses climate variables to predict cholera suitability. The model's predictions are saved as
a CSV file and a plot showing the model fit (accuracy and loss) is generated.
}
\examples{
\dontrun{
# Basic usage with auto-detected date ranges
est_suitability(PATHS)

# Historical validation: fit on 2010-2020, predict on 2021-2023  
est_suitability(PATHS, 
                fit_date_start = "2010-01-01", 
                fit_date_stop = "2020-12-31",
                pred_date_start = "2021-01-01", 
                pred_date_stop = "2023-12-31")

}

}
\seealso{
\code{\link[keras]{layer_lstm}}, \code{\link[keras]{fit}}, \code{\link[ggplot2]{ggplot}}
}
