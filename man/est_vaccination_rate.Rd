% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/est_vaccination_rate.R
\name{est_vaccination_rate}
\alias{est_vaccination_rate}
\title{Estimate OCV Vaccination Rates}
\usage{
est_vaccination_rate(
  PATHS,
  date_start = NULL,
  date_stop = NULL,
  max_rate_per_day,
  data_source
)
}
\arguments{
\item{PATHS}{A list containing file paths, including:
\describe{
\item{DATA_SCRAPE_WHO_VACCINATION}{The path to the folder containing WHO vaccination data.}
\item{DATA_DEMOGRAPHICS}{The path to the folder containing demographic data.}
\item{MODEL_INPUT}{The path to the folder where processed data will be saved.}
}}

\item{date_start}{The start date for the vaccination data range (in "YYYY-MM-DD" format). Defaults to the earliest date in the data.}

\item{date_stop}{The stop date for the vaccination data range (in "YYYY-MM-DD" format). Defaults to the latest date in the data.}

\item{max_rate_per_day}{The maximum vaccination rate per day used to redistribute doses. Default is 100,000 doses/day.}

\item{data_source}{The source of the vaccination data. Must be one of \code{"WHO"} or \code{"GTFCC"}.}
}
\value{
This function does not return an R object but saves the following files to the directory specified in \code{PATHS$MODEL_INPUT}:
\itemize{
\item A redistributed vaccination data file named \code{"data_vaccinations_<data_source>_redistributed.csv"}.
\item A parameter data frame for the vaccination rate (nu) named \code{"param_nu_vaccination_rate.csv"}.
}
}
\description{
This function processes vaccination data from WHO or GTFCC, redistributes doses based on a maximum daily rate, and calculates vaccination parameters for use in the MOSAIC cholera model. The processed data includes redistributed daily doses, cumulative doses, and the proportion of the population vaccinated. The results are saved as CSV files for downstream modeling.
}
\details{
The function performs the following steps:
\enumerate{
\item \strong{Load Vaccination Data}:
- Reads processed vaccination data from WHO or GTFCC and filters for relevant columns (\code{iso_code}, \code{campaign_date}, \code{doses_shipped}).
\item \strong{Redistribute Doses}:
- Redistributes shipped doses day by day based on a maximum daily rate (\code{max_rate_per_day}).
- Ensures no duplication of \code{distribution_date} within \code{iso_code}.
\item \strong{Validate Redistribution}:
- Checks that the redistributed doses sum to the total shipped doses.
\item \strong{Ensure Full Coverage}:
- Ensures all ISO codes have data across the full date range (\code{date_start} to \code{date_stop}), filling missing dates with zero doses.
\item \strong{Calculate Population Metrics}:
- Merges population data for 2023, calculates cumulative doses, and computes the proportion of the population vaccinated.
\item \strong{Save Outputs}:
- Saves the redistributed vaccination data and the vaccination rate parameter data frame.
}
}
\examples{
\dontrun{
PATHS <- list(
  DATA_SCRAPE_WHO_VACCINATION = "path/to/who_vaccination_data",
  DATA_DEMOGRAPHICS = "path/to/demographics",
  MODEL_INPUT = "path/to/save/processed/data"
)
est_vaccination_rate(PATHS, max_rate_per_day = 100000, data_source = "WHO")
}

}
