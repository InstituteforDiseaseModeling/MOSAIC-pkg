% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/get_lstm_sequence_splits.R
\name{get_lstm_sequence_splits}
\alias{get_lstm_sequence_splits}
\title{Create Train/Validation Splits for LSTM Sequences}
\usage{
get_lstm_sequence_splits(
  train_sequences,
  split_method = "random",
  train_prop = 0.6,
  seed = 99,
  verbose = TRUE
)
}
\arguments{
\item{train_sequences}{List containing LSTM sequences with X, y, countries, and dates
(output from create_lstm_sequences function)}

\item{split_method}{Character. Either "random" (default) or "location_month_block"}

\item{train_prop}{Numeric. Proportion of data for training (default 0.6)}

\item{seed}{Integer. Random seed for reproducibility}

\item{verbose}{Logical. Whether to print detailed information about splits (default TRUE)}
}
\value{
List containing train/validation indices and metadata:
\itemize{
\item train_indices: Indices for training sequences
\item val_indices: Indices for validation sequences
\item split_info: List with split statistics and metadata
}
}
\description{
This function creates train/validation splits from LSTM sequences using either
random sampling or location-month blocking. The location-month blocking approach
groups sequences by country-month combinations and randomly assigns entire blocks
to train/test, which better preserves spatial-temporal structure and tests
generalization capability.
}
\details{
\strong{Random Method (existing approach)}:
\itemize{
\item Randomly samples individual sequences for train/test split
\item Good for general model development and comparison
\item May allow data leakage for sequences from same location-month
}

\strong{Location-Month Block Method (new approach)}:
\itemize{
\item Groups sequences by iso_code + year-month combinations
\item Randomly assigns entire location-month blocks to train or validation
\item Ensures no data leakage between train/validation for the same location-month
\item Better tests spatial-temporal generalization capability
\item More realistic evaluation for deployment to new regions/time periods
}

The location-month blocking approach is particularly valuable for:
\itemize{
\item Testing model generalization to unseen location-time combinations
\item Preventing overfitting to specific location-month patterns
\item Evaluating suitability for early warning systems
\item Assessing transferability across different epidemiological contexts
}
}
\examples{
\dontrun{
# After creating LSTM sequences
train_sequences <- create_lstm_sequences(...)

# Random splitting (existing method)
splits_random <- get_lstm_sequence_splits(
  train_sequences,
  split_method = "random",
  train_prop = 0.6,
  seed = 99
)

# Location-month blocking (new method)
splits_blocked <- get_lstm_sequence_splits(
  train_sequences,
  split_method = "location_month_block",
  train_prop = 0.6,
  seed = 99
)

# Use the splits in LSTM training
X_train <- train_sequences$X[splits_blocked$train_indices, , ]
y_train <- train_sequences$y[splits_blocked$train_indices]
X_val <- train_sequences$X[splits_blocked$val_indices, , ]
y_val <- train_sequences$y[splits_blocked$val_indices]

# Check split information
print(splits_blocked$split_info)
}

}
