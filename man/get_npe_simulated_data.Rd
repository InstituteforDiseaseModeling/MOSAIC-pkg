% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/get_npe_simulated_data.R
\name{get_npe_simulated_data}
\alias{get_npe_simulated_data}
\title{Get NPE Simulated Data from LASER Model Output}
\usage{
get_npe_simulated_data(
  laser_result,
  include_deaths = FALSE,
  validate = TRUE,
  verbose = FALSE
)
}
\arguments{
\item{laser_result}{A LASER model result object returned from \code{run_LASER_model()}
or direct Python laser_cholera execution. Must contain results$expected_cases.}

\item{include_deaths}{Logical; whether to include deaths column in output if
available in laser_result. Default is FALSE since NPE is typically trained
on cases only.}

\item{validate}{Logical; whether to validate the output data structure.
Default is TRUE. Checks for required columns and data types.}

\item{verbose}{Logical; whether to print informative messages about data
processing. Default is FALSE.}
}
\value{
A data frame in long format with columns:
\itemize{
\item \code{j} — Location identifier (character)
\item \code{t} — Time index (numeric)
\item \code{cases} — Simulated case counts (numeric)
\item \code{deaths} — Simulated death counts (numeric, optional)
}
}
\description{
Extracts simulated outbreak data from a LASER model result object and converts
it to the same long-format data frame structure as \code{\link{get_npe_observed_data}}.
This ensures consistency between observed and simulated data formats for NPE workflows.
}
\details{
This function provides the simulated data counterpart to \code{\link{get_npe_observed_data}},
ensuring that both observed and simulated data use identical formats. This is essential
for:
\itemize{
\item Comparing simulated vs observed data
\item Computing likelihoods
\item NPE training with simulated data
\item Posterior predictive checks
}

The function handles both R and Python LASER result objects, automatically
converting Python numpy arrays to R matrices when necessary.
}
\section{Location Extraction}{

Location identifiers are extracted from laser_result$params in the following order:
\enumerate{
\item laser_result$params$location_name
\item laser_result$params$iso_code
\item laser_result$params$location_code
\item Numeric indices as fallback ("1", "2", "3", ...)
}
}

\examples{
\dontrun{
# Run LASER model
laser_result <- run_LASER_model(
  paramfile = config,
  seed = 123
)

# Extract simulated data in NPE format
simulated_data <- get_npe_simulated_data(laser_result)

# Compare with observed data format
observed_data <- get_npe_observed_data(config)

# Both have identical structure:
# j   t  cases
# ETH 1    10
# ETH 2    15
# ...

# Use for NPE inference
posterior <- est_npe_posterior(
  model_dir = "path/to/npe",
  observed_data = simulated_data,  # Can use simulated data
  n_samples = 10000
)
}

}
\seealso{
\itemize{
\item \code{\link{get_npe_observed_data}} — Parallel function for observed data
\item \code{\link{run_LASER_model}} — Generates laser_result objects
\item \code{\link{extract_laser_output}} — Lower-level extraction function
\item \code{\link{est_npe_posterior}} — Uses this data format for inference
}
}
