% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plot_model_fit.R
\name{plot_model_fit}
\alias{plot_model_fit}
\title{Plot Model Fit: Timeseries of Predicted vs Observed}
\usage{
plot_model_fit(
  model,
  output_dir,
  verbose = TRUE,
  precalculated_likelihood = NULL
)
}
\arguments{
\item{model}{A laser-cholera Model object (class 'laser_cholera.metapop.model.Model')
output from lc$run_model(paramfile = config). Must contain:
\itemize{
\item results$expected_cases - predicted cases
\item results$disease_deaths - predicted deaths
\item params$reported_cases - observed cases
\item params$reported_deaths - observed deaths
\item params$location_name - location identifiers
\item params$date_start and params$date_stop - time range for the plot
\item params$seed - seed used for the model run (optional, for display)
}}

\item{output_dir}{Character string specifying the directory where the plot
should be saved. Directory will be created if it doesn't exist.}

\item{verbose}{Logical indicating whether to print messages. Default is TRUE.}

\item{precalculated_likelihood}{Numeric value of precalculated likelihood to use
in plot titles instead of recalculating. If NULL, likelihood will be calculated
using calc_model_likelihood. Default is NULL.}
}
\value{
Invisibly returns a list of ggplot objects:
\itemize{
\item \code{individual}: Named list of plots for each location
\item \code{cases_faceted}: Faceted plot of cases by location (if n_locations > 1)
\item \code{deaths_faceted}: Faceted plot of deaths by location (if n_locations > 1)
}
}
\description{
Creates timeseries plots comparing model predictions with observed data
from a laser-cholera model run.
}
\details{
This function creates three types of publication-quality timeseries plots:
\enumerate{
\item Individual location plots: For each location, a plot with cases and deaths as rows
\item Cases faceted plot: All locations' cases in one faceted plot (skipped if only 1 location)
\item Deaths faceted plot: All locations' deaths in one faceted plot (skipped if only 1 location)
}

Each plot shows:
\itemize{
\item Observed data as black points
\item Predicted data as colored lines (blue for cases, dark red for deaths)
\item Automatic scaling and layout based on the number of locations
\item Model performance statistics in the subtitle and caption:
\itemize{
\item Seed value (from model$params$seed if available)
\item Log-likelihood (calculated using calc_model_likelihood)
\item Total observed and predicted counts
\item Correlation between observed and predicted values
}
}
}
\examples{
\dontrun{
# Run a model
config <- sample_parameters(priors = priors, config = base_config, seed = 123)
model <- lc$run_model(paramfile = config)

# Create timeseries plots
plots <- plot_model_fit(
    model = model,
    output_dir = "output/plots"
)

# Access individual plots
plots$individual[["ETH"]]  # Individual location plot for Ethiopia
plots$cases_faceted         # Faceted cases plot (if n_locations > 1)
plots$deaths_faceted        # Faceted deaths plot (if n_locations > 1)
}

}
