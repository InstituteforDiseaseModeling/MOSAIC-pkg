% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plot_model_ppc.R
\name{plot_model_ppc}
\alias{plot_model_ppc}
\title{Plot Posterior Predictive Checks from Ensemble Predictions}
\usage{
plot_model_ppc(
  predictions_dir = NULL,
  predictions_files = NULL,
  by_location = c("aggregate", "both", "per_location"),
  locations = NULL,
  model = NULL,
  output_dir,
  verbose = TRUE
)
}
\arguments{
\item{predictions_dir}{Character string specifying directory containing prediction CSV files.
Function will auto-discover predictions_ensemble_\emph{.csv or predictions_stochastic_}.csv files.}

\item{predictions_files}{Character vector of specific CSV file paths to use.
Overrides predictions_dir if provided.}

\item{by_location}{Character string specifying plot mode: "both" (default), "aggregate", or "per_location".
\itemize{
\item "aggregate": Single set of plots pooling all locations (default behavior)
\item "per_location": Separate plots for each location
\item "both": Create both aggregate and per-location plots
}}

\item{locations}{Character vector of specific locations to plot. NULL (default) uses all locations.}

\item{model}{Legacy: A laser-cholera Model object (for backward compatibility).
Not recommended - use CSV-based inputs instead.}

\item{output_dir}{Directory where PPC plots will be saved. Creates "ppc" subdirectory.}

\item{verbose}{Logical indicating whether to print progress messages (default: TRUE)}
}
\value{
NULL (invisibly). Creates PDF files as side effects.
}
\description{
Creates professional posterior predictive check (PPC) plots to assess model fit
using CSV files from stochastic/ensemble predictions. Generates three types of
diagnostic plots: density overlays, Q-Q plots, and residual analysis.
}
\details{
Creates a multi-page PDF with PPC diagnostics: density overlays, calibration
scatter plots, Q-Q plots, residuals vs observed, and temporal patterns.

Output files:
\itemize{
\item ppc.pdf - Aggregate diagnostics (all locations combined)
\item ppc_ISO.pdf - Per-location diagnostics (e.g., ppc_ETH.pdf, ppc_KEN.pdf)
}

The function uses ensemble predictions (median/mean) from CSV files generated by
plot_model_fit_stochastic() or plot_model_fit_stochastic_param(). This provides
better assessment than single model realizations.

Color palette (Scientific Blue-Red):
\itemize{
\item Observed data: #2E86AB (Professional blue)
\item Predicted data: #A23B72 (Professional purple-red)
\item Reference lines: #F18F01 (Orange)
\item Smoothing curves: #C73E1D (Red-orange)
\item Outlier highlights: #DC3545 (Alert red)
\item Grid: #F5F5F5 (Light gray)
}
}
\examples{
\dontrun{
# From predictions directory (auto-discovers CSV files)
plot_model_ppc(
  predictions_dir = "output/1_bfrs/plots/predictions",
  output_dir = "output/1_bfrs/plots"
)

# Both aggregate and per-location plots
plot_model_ppc(
  predictions_dir = "output/plots/predictions",
  output_dir = "output/plots",
  by_location = "both"
)

# Specific locations only
plot_model_ppc(
  predictions_dir = "output/plots/predictions",
  output_dir = "output/plots",
  locations = c("ETH", "KEN"),
  by_location = "per_location"
)

# Legacy mode (not recommended)
plot_model_ppc(model = best_model, output_dir = "output/plots")
}

}
