# Estimate Vaccine Effectiveness Decay Parameters

This function estimates oral cholera vaccine (OCV) effectiveness decay
by fitting exponential decay models to meta-regression effectiveness
data from Xu et al (2024). It estimates decay parameters (omega) and
initial effectiveness (phi) for both one-dose and two-dose regimens
using non-linear least squares with the Levenberg-Marquardt algorithm.

## Usage

``` r
est_vaccine_effectiveness(PATHS)
```

## Arguments

- PATHS:

  A list containing the paths where data and parameters are saved.
  Typically generated by the
  [`get_paths()`](https://institutefordiseasemodeling.github.io/MOSAIC-pkg/reference/get_paths.md)
  function and should include:

  - **MODEL_INPUT**: Path to the directory where parameter files, data,
    and predictions will be saved.

## Value

The function does not return values but saves three CSV files:

- `data_vaccine_effectiveness.csv`: Original meta-regression data points
  from Xu et al

- `pred_vaccine_effectiveness.csv`: Predicted effectiveness over 10
  years with confidence intervals

- `param_vaccine_effectiveness.csv`: Parameter estimates with
  distributional parameters for uncertainty

## Details

The function performs the following steps:

1.  Creates vaccine effectiveness data from Xu et al (2024)
    meta-regression results

2.  Fits exponential decay models VE(t) = phi \* exp(-omega \* t)
    separately for one-dose and two-dose regimens

3.  Estimates parameters for mean effectiveness and confidence intervals
    using constrained optimization

4.  Infers beta distributions for initial effectiveness (phi) and gamma
    distributions for decay rates (omega)

5.  Saves data points, predictions, and parameter distributions to CSV
    files

The model parameters are:

- **phi_1, phi_2**: Initial vaccine effectiveness for one-dose and
  two-dose regimens

- **omega_1, omega_2**: Daily decay rates for one-dose and two-dose
  regimens

## References

Xu et al. (2024). Effectiveness of Oral Cholera Vaccines: A Systematic
Review and Meta-Analysis. medRxiv.
https://doi.org/10.1101/2024.08.13.24311930v2

## Examples

``` r
if (FALSE) { # \dontrun{
# Assuming PATHS is generated from get_paths()
PATHS <- get_paths()
est_vaccine_effectiveness(PATHS)
} # }
```
