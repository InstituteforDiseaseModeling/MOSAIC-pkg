<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Run MOSAIC Calibration by ISO Code (Simple Interface) — run_mosaic_iso • MOSAIC</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Run MOSAIC Calibration by ISO Code (Simple Interface) — run_mosaic_iso"><meta name="description" content="This is the recommended interface for most users. Simplified wrapper that loads
default config and priors for specified ISO codes and runs the full MOSAIC calibration.
For advanced customization (custom configs, non-standard locations), use run_mosaic() directly.
Executes the full MOSAIC calibration workflow:
Adaptive calibration with R² convergence detection
Single predictive batch (calculated from calibration phase)
Adaptive fine-tuning with 5-tier batch sizing
Post-hoc subset optimization for NPE priors
Posterior quantile and distribution estimation
Posterior predictive checks and uncertainty quantification
Optional: Neural Posterior Estimation (NPE) stage

"><meta property="og:description" content="This is the recommended interface for most users. Simplified wrapper that loads
default config and priors for specified ISO codes and runs the full MOSAIC calibration.
For advanced customization (custom configs, non-standard locations), use run_mosaic() directly.
Executes the full MOSAIC calibration workflow:
Adaptive calibration with R² convergence detection
Single predictive batch (calculated from calibration phase)
Adaptive fine-tuning with 5-tier batch sizing
Post-hoc subset optimization for NPE priors
Posterior quantile and distribution estimation
Posterior predictive checks and uncertainty quantification
Optional: Neural Posterior Estimation (NPE) stage

"><meta property="og:image" content="https://institutefordiseasemodeling.github.io/MOSAIC-pkg/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">MOSAIC</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Deployment.html">Deployment</a></li>
    <li><a class="dropdown-item" href="../articles/Installation.html">Installation</a></li>
    <li><a class="dropdown-item" href="../articles/Running-MOSAIC.html">Running MOSAIC</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/InstituteforDiseaseModeling/MOSAIC-pkg/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Run MOSAIC Calibration by ISO Code (Simple Interface)</h1>
      <small class="dont-index">Source: <a href="https://github.com/InstituteforDiseaseModeling/MOSAIC-pkg/blob/main/R/run_MOSAIC.R" class="external-link"><code>R/run_MOSAIC.R</code></a></small>
      <div class="d-none name"><code>run_mosaic_iso.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><strong>This is the recommended interface for most users.</strong> Simplified wrapper that loads
default config and priors for specified ISO codes and runs the full MOSAIC calibration.</p>
<p>For advanced customization (custom configs, non-standard locations), use <code><a href="run_mosaic.html">run_mosaic()</a></code> directly.</p>
<p>Executes the full MOSAIC calibration workflow:</p><ol><li><p>Adaptive calibration with R² convergence detection</p></li>
<li><p>Single predictive batch (calculated from calibration phase)</p></li>
<li><p>Adaptive fine-tuning with 5-tier batch sizing</p></li>
<li><p>Post-hoc subset optimization for NPE priors</p></li>
<li><p>Posterior quantile and distribution estimation</p></li>
<li><p>Posterior predictive checks and uncertainty quantification</p></li>
<li><p>Optional: Neural Posterior Estimation (NPE) stage</p></li>
</ol></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">run_mosaic_iso</span><span class="op">(</span><span class="va">iso_code</span>, <span class="va">dir_output</span>, control <span class="op">=</span> <span class="cn">NULL</span>, resume <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">run_MOSAIC_iso</span><span class="op">(</span><span class="va">iso_code</span>, <span class="va">dir_output</span>, control <span class="op">=</span> <span class="cn">NULL</span>, resume <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-iso-code">iso_code<a class="anchor" aria-label="anchor" href="#arg-iso-code"></a></dt>
<dd><p>Character vector of ISO3 codes (e.g., <code>"ETH"</code> or <code>c("ETH", "KEN", "TZA")</code>).
Determines which locations to model. Config and priors are automatically loaded for these locations.</p></dd>


<dt id="arg-dir-output">dir_output<a class="anchor" aria-label="anchor" href="#arg-dir-output"></a></dt>
<dd><p>Character. Output directory for this calibration run (REQUIRED).
All results will be saved here. Must be unique per run.</p></dd>


<dt id="arg-control">control<a class="anchor" aria-label="anchor" href="#arg-control"></a></dt>
<dd><p>Control list created with <code><a href="mosaic_control_defaults.html">mosaic_control_defaults()</a></code>. If <code>NULL</code>, uses defaults.
Common settings:</p><ul><li><p><code>calibration$n_simulations</code>: NULL for auto mode, integer for fixed</p></li>
<li><p><code>calibration$n_iterations</code>: Iterations per simulation (default: 3)</p></li>
<li><p><code>parallel$enable</code>: Enable parallel execution (default: FALSE)</p></li>
<li><p><code>parallel$n_cores</code>: Number of cores (default: 1)</p></li>
</ul></dd>


<dt id="arg-resume">resume<a class="anchor" aria-label="anchor" href="#arg-resume"></a></dt>
<dd><p>Logical. If <code>TRUE</code>, continues from existing checkpoint. Default: FALSE.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Invisibly returns a list with:</p><dl><dt>dirs</dt>
<dd><p>Named list of output directories</p></dd>

<dt>files</dt>
<dd><p>Named list of key output files</p></dd>

<dt>summary</dt>
<dd><p>Named list with run statistics</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="run_mosaic.html">run_mosaic()</a></code> for advanced usage with custom configs</p>
<p><code><a href="mosaic_control_defaults.html">mosaic_control_defaults()</a></code> for building control structures</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># === SIMPLE USAGE ===</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Single location with defaults</span></span></span>
<span class="r-in"><span><span class="fu">run_mosaic_iso</span><span class="op">(</span><span class="st">"ETH"</span>, <span class="st">"./output"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Multiple locations</span></span></span>
<span class="r-in"><span><span class="fu">run_mosaic_iso</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ETH"</span>, <span class="st">"KEN"</span>, <span class="st">"TZA"</span><span class="op">)</span>, <span class="st">"./output"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># === WITH CONTROL SETTINGS ===</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Parallel execution with 8 cores</span></span></span>
<span class="r-in"><span><span class="fu">run_mosaic_iso</span><span class="op">(</span></span></span>
<span class="r-in"><span>  iso_code <span class="op">=</span> <span class="st">"ETH"</span>,</span></span>
<span class="r-in"><span>  dir_output <span class="op">=</span> <span class="st">"./output"</span>,</span></span>
<span class="r-in"><span>  control <span class="op">=</span> <span class="fu"><a href="mosaic_control_defaults.html">mosaic_control_defaults</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    parallel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>enable <span class="op">=</span> <span class="cn">TRUE</span>, n_cores <span class="op">=</span> <span class="fl">8</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Fixed mode: exactly 5000 simulations, 5 iterations each</span></span></span>
<span class="r-in"><span><span class="fu">run_mosaic_iso</span><span class="op">(</span></span></span>
<span class="r-in"><span>  iso_code <span class="op">=</span> <span class="st">"ETH"</span>,</span></span>
<span class="r-in"><span>  dir_output <span class="op">=</span> <span class="st">"./output"</span>,</span></span>
<span class="r-in"><span>  control <span class="op">=</span> <span class="fu"><a href="mosaic_control_defaults.html">mosaic_control_defaults</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    calibration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      n_simulations <span class="op">=</span> <span class="fl">5000</span>,</span></span>
<span class="r-in"><span>      n_iterations <span class="op">=</span> <span class="fl">5</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Auto mode with custom maximum</span></span></span>
<span class="r-in"><span><span class="fu">run_mosaic_iso</span><span class="op">(</span></span></span>
<span class="r-in"><span>  iso_code <span class="op">=</span> <span class="st">"ETH"</span>,</span></span>
<span class="r-in"><span>  dir_output <span class="op">=</span> <span class="st">"./output"</span>,</span></span>
<span class="r-in"><span>  control <span class="op">=</span> <span class="fu"><a href="mosaic_control_defaults.html">mosaic_control_defaults</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    calibration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      n_simulations <span class="op">=</span> <span class="cn">NULL</span>,  <span class="co"># NULL = auto mode</span></span></span>
<span class="r-in"><span>      max_simulations <span class="op">=</span> <span class="fl">50000</span>,</span></span>
<span class="r-in"><span>      batch_size <span class="op">=</span> <span class="fl">1000</span></span></span>
<span class="r-in"><span>    <span class="op">)</span>,</span></span>
<span class="r-in"><span>    parallel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>enable <span class="op">=</span> <span class="cn">TRUE</span>, n_cores <span class="op">=</span> <span class="fl">16</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># === SAMPLE SPECIFIC PARAMETERS ===</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Only sample transmission and recovery, hold others fixed</span></span></span>
<span class="r-in"><span><span class="fu">run_mosaic_iso</span><span class="op">(</span></span></span>
<span class="r-in"><span>  iso_code <span class="op">=</span> <span class="st">"ETH"</span>,</span></span>
<span class="r-in"><span>  dir_output <span class="op">=</span> <span class="st">"./output"</span>,</span></span>
<span class="r-in"><span>  control <span class="op">=</span> <span class="fu"><a href="mosaic_control_defaults.html">mosaic_control_defaults</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    sampling <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      sample_tau_i <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>      sample_mobility_gamma <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>      sample_mobility_omega <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>      sample_mu_j <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>      sample_iota <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>      sample_gamma_2 <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>      sample_alpha_1 <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/gilesjohnr" class="external-link">John R Giles</a>, <a href="https://github.com/ChristopherWLorton" class="external-link">Christopher W Lorton</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

